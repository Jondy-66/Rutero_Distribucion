
{
  "entities": {
    "Customer": {
      "title": "Customer",
      "type": "object",
      "description": "Perfil del cliente para el CRM con métricas de valor y predicción.",
      "properties": {
        "id": { "type": "string" },
        "name": { "type": "string" },
        "phone": { "type": "string" },
        "email": { "type": "string" },
        "agent_id": { "type": "string", "description": "UID del teleoperador asignado" },
        "average_ticket": { "type": "number", "description": "AOV calculado" },
        "last_purchase_date": { "type": "string", "format": "date-time" },
        "next_call_date": { "type": "string", "format": "date-time" },
        "purchase_frequency_days": { "type": "number", "description": "Intervalo promedio de compra" },
        "status": { "type": "string", "enum": ["lead", "active", "churn"] },
        "tier": { "type": "string", "enum": ["VIP", "Medio", "Bajo"] },
        "priority_score": { "type": "number" }
      },
      "required": ["id", "name", "agent_id", "status"]
    },
    "Sale": {
      "title": "Sale",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "customer_id": { "type": "string" },
        "amount": { "type": "number" },
        "date": { "type": "string", "format": "date-time" },
        "agent_id": { "type": "string" },
        "category": { "type": "string" }
      },
      "required": ["id", "customer_id", "amount", "date", "agent_id"]
    },
    "Call": {
      "title": "Call",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "customer_id": { "type": "string" },
        "agent_id": { "type": "string" },
        "duration": { "type": "number" },
        "outcome": { "type": "string", "enum": ["sold", "no_answer", "callback"] },
        "timestamp": { "type": "string", "format": "date-time" },
        "notes": { "type": "string" }
      },
      "required": ["id", "customer_id", "agent_id", "outcome", "timestamp"]
    }
  },
  "auth": {
    "providers": ["password"]
  },
  "firestore": {
    "/customers/{customerId}": { "schema": { "$ref": "#/entities/Customer" }, "description": "Clientes asignados a teleoperadores" },
    "/sales/{saleId}": { "schema": { "$ref": "#/entities/Sale" }, "description": "Historial de ventas para predicción de ciclo" },
    "/calls/{callId}": { "schema": { "$ref": "#/entities/Call" }, "description": "Bitácora de llamadas" }
  }
}
